<div class="flex flex-col gap-2">
  <mat-card>
    <form [formGroup]="form">
      <div class="flex flex-row gap-4 p-4">
        <mat-form-field class="w-full dense-3" appearance="outline" subscriptSizing="dynamic">
          <mat-label>{{ 'BOOKING.Form.Size.Label' | translate }}</mat-label>
          <input matInput type="number" formControlName="size">
          @if (form.get('size')?.hasError('required')) {
            <mat-error>{{ 'BOOKING.Form.Required' | translate }}</mat-error>
          } @else if (form.get('size')?.hasError('min')) {
            <mat-error>{{ 'BOOKING.Form.Size.MinSize' | translate }}</mat-error>
          }

        </mat-form-field>

        @if (size?.value > 1) {
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <mat-form-field class="w-full dense-3" appearance="outline" subscriptSizing="dynamic">
              <mat-label>{{ 'BOOKING.Form.MinAge.Label' | translate }}</mat-label>
              <input matInput type="number" formControlName="minAge">
              @if (form.get('minAge')?.hasError('required')) {
                <mat-error>{{ 'BOOKING.Form.Required' | translate }}</mat-error>
              } @else if (form.get('minAge')?.hasError('min')) {
                <mat-error>{{ 'BOOKING.Form.MinAge.MinValue' | translate: {min: 0} }}</mat-error>
              } @else if (form.hasError('agesMustMatchForSingleVisitor')) {
                <mat-error>{{ 'BOOKING.Form.MinAge.AgesMustMatch' | translate }}</mat-error>
              }
            </mat-form-field>
            <mat-form-field class="w-full dense-3" appearance="outline" subscriptSizing="dynamic">
              <mat-label>{{ 'BOOKING.Form.MaxAge.Label' | translate }}</mat-label>
              <input matInput type="number" formControlName="maxAge">
              @if (form.get('maxAge')?.hasError('required')) {
                <mat-error>{{ 'BOOKING.Form.Required' | translate }}</mat-error>
              } @else if (form.get('maxAge')?.hasError('min')) {
                <mat-error>{{ 'BOOKING.Form.MaxAge.MinValue' | translate: {min: 0} }}</mat-error>
              } @else if (form.hasError('agesMustMatchForSingleVisitor')) {
                <mat-error>{{ 'BOOKING.Form.MaxAge.AgesMustMatch' | translate }}</mat-error>
              }
            </mat-form-field>
          </div>
        } @else {
          <mat-form-field class="w-full dense-3" appearance="outline" subscriptSizing="dynamic">
            <mat-label>{{ 'BOOKING.Form.Age.Label' | translate }}</mat-label>
            <input matInput type="number" formControlName="minAge">
          </mat-form-field>
        }
      </div>
    </form>
  </mat-card>
  <mat-card class="mb-2">
    <app-offer-finder
      [visitorSize]="data().visitor.size"
      [hideNotMatching]="true"
      [hideVisitorSizeSelector]="true"
      (offerSelected)="handleOfferSelected($event)"
    >
    </app-offer-finder>
  </mat-card>
</div>
